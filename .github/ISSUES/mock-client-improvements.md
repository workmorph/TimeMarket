---
title: Supabaseモッククライアントの改善
assignees: kentanonaka
labels: enhancement, backend, testing
priority: medium
---

# Supabaseモッククライアントの改善

## 概要
TimeBidアプリケーションのSupabaseモッククライアントに機能不足があり、オークションデータの取得時にエラーが発生しています。開発環境でSupabase環境変数が設定されていない場合でも、アプリケーションが正常に動作するようにモッククライアントを改善する必要があります。

## 現在の問題点
- コンソールに「オークションデータの取得に失敗しました」というエラーが表示される
- モッククライアントに`single()`メソッドが実装されていない
- `profiles`テーブルに関連するクエリが適切に処理されていない
- 環境変数が設定されていない場合のフォールバック処理が不完全

## 実装内容
1. **モッククライアントの機能拡張**
   - `single()`メソッドの実装
   - `profiles`テーブルのモックデータとクエリ処理の追加
   - 複雑なクエリ（結合、フィルタリング）のサポート強化

2. **エラーハンドリングの改善**
   - 適切なエラーメッセージとスタックトレース
   - デバッグ情報の充実
   - 開発モードでの詳細ログ

3. **モックデータの拡充**
   - より現実的なテストデータの追加
   - 様々なユースケースに対応するデータセット

## 技術的詳細
- `/src/lib/supabase/mock-client.ts`の修正
- Supabase SDKのインターフェースに準拠した実装
- TypeScriptの型安全性の確保

## 受け入れ基準
- [ ] オークションデータの取得エラーが解消される
- [ ] `single()`メソッドが正常に動作する
- [ ] `profiles`テーブルに関連するクエリが適切に処理される
- [ ] 環境変数が設定されていない場合でもアプリケーションが正常に動作する

## 関連イシュー
- #toast-notification-system
- #dialog-accessibility-warnings

## 次のステップ
1. モッククライアントのユニットテスト追加
2. 他のSupabaseテーブルのモック実装
3. 開発/テスト環境の分離と設定の改善
